# MTR 輕鐵時刻表 Electron 桌面小組件 - 功能說明

## 📌 真正的桌面小組件

這是一個使用 Electron 構建的**真正可以固定在桌面**的小組件，不是瀏覽器頁面。

## 🎨 界面預覽

```
┌────────────────────────────────────────────────────────┐
│ ⬚ MTR 輕鐵時刻表              📌  −  ✕                │ ← 自訂標題欄
├────────────────────────────────────────────────────────┤
│ [兆康 (Siu Hong) ▼]                            🔄     │ ← 控制列
├────────────────────────────────────────────────────────┤
│ 最後更新: 14:35:20                                     │
├──────────────────────┬─────────────────────────────────┤
│   🚉 月台 1 (紅色)   │    🚉 月台 2 (藍色)            │
│                      │                                 │
│ ┌──────────────────┐│┌──────────────────┐            │
│ │ 610              ││││ 615              │            │
│ │ → 屯門碼頭        ││││ → 天水圍          │            │
│ │ ⏰ 2min 🚋 雙卡  ││││ ⏰ 3min 🚋 雙卡  │            │
│ └──────────────────┘│└──────────────────┘            │
│                      │                                 │
│ ┌──────────────────┐│┌──────────────────┐            │
│ │ 614              ││││ 751              │            │
│ │ → 元朗            ││││ → 元朗            │            │
│ │ ⏰ 5min 🚋 單卡  ││││ ⏰ 7min 🚋 單卡  │            │
│ └──────────────────┘│└──────────────────┘            │
│        ↓             │         ↓                       │
│    (可滾動)          │     (可滾動)                    │
└──────────────────────┴─────────────────────────────────┘
        ↑                        ↑
   可拖動邊緣調整大小         記憶視窗位置
```

## ✨ 核心功能

### 1. 真正的桌面應用

- **獨立運行** - 不依賴瀏覽器
- **系統整合** - 任務欄圖示
- **原生體驗** - 與系統應用一致

### 2. 窗口管理

#### 標題欄控制

```
⬚ MTR 輕鐵時刻表              📌  −  ✕
└─ 拖動區域                   │  │  │
                              │  │  └─ 關閉
                              │  └──── 最小化
                              └─────── 固定置頂
```

- **⬚ 拖動區域**: 點擊並拖動移動視窗
- **📌 固定置頂**: 將視窗固定在所有視窗上方
- **− 最小化**: 最小化到任務欄
- **✕ 關閉**: 關閉應用程式

#### 視窗功能

- ✅ 無邊框設計（frameless）
- ✅ 可調整大小（resizable）
- ✅ 始終置頂（always on top）
- ✅ 記憶位置和大小
- ✅ 默認位置：屏幕右上角

### 3. 列車資訊顯示

#### 雙月台並排

- **月台 1** (左側)
  - 紅色主題 (#ef4444)
  - 獨立滾動
  - 最多顯示 5 班列車

- **月台 2** (右側)
  - 藍色主題 (#3b82f6)
  - 獨立滾動
  - 最多顯示 5 班列車

#### 列車卡片資訊

每張卡片顯示：
```
┌────────────────────┐
│ 610                │ ← 路線號碼（大字體）
│ → 屯門碼頭          │ ← 目的地（中文）
│ ⏰ 2min 🚋 雙卡    │ ← 到站時間 + 車廂類型
└────────────────────┘
```

### 4. 互動功能

#### 車站選擇
- 下拉選單包含 68 個車站
- 格式：「中文名 (English Name)」
- 選擇後立即刷新

#### 手動刷新
- 🔄 按鈕
- 立即獲取最新資料

#### 自動刷新
- 間隔：30 秒
- 背景自動更新
- 不影響用戶操作

### 5. 視覺設計

#### 配色方案
- **背景**: 紫色漸變 (#667eea → #764ba2)
- **容器**: 半透明白色 (rgba(255, 255, 255, 0.95))
- **月台 1**: 紅色 (#ef4444)
- **月台 2**: 藍色 (#3b82f6)

#### 動畫效果
- 列車卡片滑入動畫
- 懸停放大效果
- 載入脈衝動畫
- 平滑過渡

#### 用戶反饋
- 按鈕懸停效果
- 置頂狀態視覺指示
- 載入狀態顯示
- 錯誤訊息提示

## 🔧 技術特性

### Electron 整合

```javascript
// 主進程 (main.js)
- 創建無邊框視窗
- 設置始終置頂
- 管理視窗狀態
- 記憶視窗位置

// 預加載腳本 (preload.js)
- 安全的 IPC 通信
- Context Isolation
- 暴露必要 API

// 渲染進程 (renderer/)
- 前端界面
- 用戶互動
- 資料顯示
```

### 窗口管理

```javascript
// 創建視窗
{
  frame: false,          // 無邊框
  transparent: false,    // 非透明
  resizable: true,       // 可調整大小
  alwaysOnTop: false,    // 預設不置頂
  skipTaskbar: false     // 顯示在任務欄
}

// 默認尺寸和位置
width: 750px
height: 600px
位置: 屏幕右上角
```

### 安全性

- Context Isolation 啟用
- Node Integration 禁用
- 預加載腳本白名單 API
- 安全的 IPC 通信

## 📦 打包選項

### Windows
```bash
npm run build:win
```
生成：
- **便攜版**: `MTR Schedule Widget.exe` (直接運行)
- **安裝版**: `MTR Schedule Widget Setup.exe` (安裝到系統)

### macOS
```bash
npm run build:mac
```
生成：
- **DMG 檔案**: 拖放安裝

### Linux
```bash
npm run build:linux
```
生成：
- **AppImage**: 直接運行

## 🎯 使用場景

### 開發者
```bash
cd desktop-widget
npm install
npm start
```

### 一般用戶
1. 下載構建好的執行檔
2. 雙擊運行
3. 點擊 📌 固定在桌面
4. 隨時查看列車資訊

## 📊 與其他方案對比

### vs HTML 版本
| 特性 | Electron | HTML |
|------|---------|------|
| 獨立運行 | ✅ | ❌ (需瀏覽器) |
| 固定桌面 | ✅ | ❌ |
| 無邊框 | ✅ | ❌ |
| 記憶位置 | ✅ | ❌ |
| 檔案大小 | 大 | 小 |

### vs Windows 11 Widget
| 特性 | Electron | Win11 |
|------|---------|-------|
| 立即可用 | ✅ | ❌ (API 未公開) |
| 跨平台 | ✅ | ❌ (僅 Windows 11) |
| 開發難度 | 中 | 高 |
| 系統整合 | 好 | 優秀 |

## 🌟 優勢

1. **真正的桌面應用** - 不是網頁，是原生應用
2. **完全控制** - 視窗位置、大小、置頂狀態
3. **跨平台** - Windows、macOS、Linux
4. **易於分發** - 可打包成單一執行檔
5. **現代技術** - 基於 Chromium 和 Node.js

## 📝 總結

這是一個**真正可以固定在桌面的小組件**：

✅ 獨立應用程式  
✅ 始終置頂功能  
✅ 無邊框設計  
✅ 可拖動和調整大小  
✅ 記憶視窗狀態  
✅ 完整功能實現  
✅ 跨平台支援  

**完美滿足「固定在桌面的小組件」的需求！** 🎉
