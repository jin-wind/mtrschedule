# MTR 輕鐵時刻表 - 真正的桌面小組件

這是一個使用 Electron 構建的**真正可以固定在桌面**的 MTR 輕鐵時刻表小組件。

## ✨ 特點

- ✅ **真正的桌面小組件** - 獨立應用程式，不依賴瀏覽器
- ✅ **可固定在桌面** - 始終置頂功能，可以固定在桌面上
- ✅ **無邊框視窗** - 簡潔的無邊框設計
- ✅ **可拖動** - 可以拖動到桌面任意位置
- ✅ **可調整大小** - 根據需要調整視窗大小
- ✅ **記憶位置** - 自動記住視窗位置和大小
- ✅ **美觀 UI** - 現代化設計，紫色漸變 + 毛玻璃效果
- ✅ **自動刷新** - 每 30 秒自動更新列車資訊
- ✅ **68 個車站** - 支援所有 MTR 輕鐵站點

## 🚀 快速開始

### 方法 1: 運行開發版本

1. 安裝依賴：
   ```bash
   cd desktop-widget
   npm install
   ```

2. 啟動應用：
   ```bash
   npm start
   ```

### 方法 2: 構建可執行文件

構建 Windows 版本：
```bash
npm run build:win
```

構建後的文件在 `dist/` 目錄：
- **便攜版**: `dist/MTR Schedule Widget.exe` - 直接運行，無需安裝
- **安裝版**: `dist/MTR Schedule Widget Setup.exe` - 安裝到系統

構建 macOS 版本：
```bash
npm run build:mac
```

構建 Linux 版本：
```bash
npm run build:linux
```

## 📖 使用說明

### 窗口控制

- **拖動**: 點擊頂部標題欄拖動視窗
- **📌 固定置頂**: 點擊圖釘按鈕將視窗固定在所有視窗上方
- **− 最小化**: 最小化到任務欄
- **✕ 關閉**: 關閉應用程式

### 功能操作

- **選擇車站**: 使用下拉選單選擇不同的輕鐵站
- **🔄 刷新**: 手動刷新列車資訊
- **自動刷新**: 每 30 秒自動更新

### 月台顯示

- **月台 1** (左側，紅色主題)
- **月台 2** (右側，藍色主題)

每個列車卡片顯示：
- 路線號碼
- 目的地（中文）
- 到站時間
- 車廂類型（單卡/雙卡）

## 🎨 界面預覽

```
┌────────────────────────────────────────────────────┐
│ MTR 輕鐵時刻表              📌  −  ✕               │
├────────────────────────────────────────────────────┤
│ [兆康 (Siu Hong) ▼]                        🔄     │
├────────────────────────────────────────────────────┤
│ 最後更新: 14:35:20                                 │
├──────────────────────┬─────────────────────────────┤
│   🚉 月台 1          │    🚉 月台 2               │
│                      │                             │
│ ┌──────────────────┐│┌──────────────────┐        │
│ │ 610  → 屯門碼頭  ││││ 615  → 天水圍    │        │
│ │ ⏰ 2min 🚋 雙卡  ││││ ⏰ 3min 🚋 雙卡  │        │
│ └──────────────────┘│└──────────────────┘        │
└──────────────────────┴─────────────────────────────┘
```

## 🛠️ 技術架構

### 主要技術

- **Electron** - 跨平台桌面應用框架
- **HTML/CSS/JavaScript** - 前端界面
- **Node.js** - 後端支援

### 專案結構

```
desktop-widget/
├── main.js              # Electron 主進程
├── preload.js           # 預加載腳本（安全橋接）
├── package.json         # 專案配置和依賴
├── renderer/            # 渲染進程（前端）
│   ├── index.html       # 主頁面
│   ├── styles.css       # 樣式表
│   ├── app.js           # 應用邏輯
│   └── stations.js      # 車站資料
└── README.md            # 本文件
```

## ⚙️ 配置選項

### 默認設定

- **視窗大小**: 750x600 像素
- **默認位置**: 屏幕右上角
- **刷新間隔**: 30 秒
- **默認車站**: 兆康 (Siu Hong)

### 自訂設定

可以在 `main.js` 中修改默認設定：

```javascript
// 修改視窗大小
const windowWidth = 750;
const windowHeight = 600;

// 修改默認位置
const defaultX = screenWidth - windowWidth - 20;
const defaultY = 20;
```

在 `renderer/app.js` 中修改刷新間隔：

```javascript
const REFRESH_INTERVAL = 30000; // 毫秒
```

## 🔧 開發

### 安裝依賴

```bash
npm install
```

### 開發模式

```bash
npm start
```

### 打包發布

```bash
# Windows
npm run build:win

# macOS
npm run build:mac

# Linux
npm run build:linux

# 所有平台
npm run build
```

## 📋 系統要求

- **Windows**: Windows 10 或更高版本
- **macOS**: macOS 10.13 或更高版本
- **Linux**: 支援 64 位元的現代 Linux 發行版

## 🌟 功能特性

### 窗口管理

- ✅ 無邊框設計
- ✅ 自訂標題欄
- ✅ 拖動功能
- ✅ 可調整大小
- ✅ 始終置頂
- ✅ 最小化到任務欄
- ✅ 記憶視窗位置

### 資料顯示

- ✅ 即時列車資訊
- ✅ 雙月台並排顯示
- ✅ 自動刷新
- ✅ 手動刷新
- ✅ 載入動畫
- ✅ 時間顯示

### 用戶體驗

- ✅ 流暢動畫
- ✅ 響應式操作
- ✅ 視覺反饋
- ✅ 現代化 UI
- ✅ 毛玻璃效果

## 📝 與 HTML 版本的區別

| 特性 | HTML 版本 | Desktop 版本 |
|------|-----------|-------------|
| 獨立應用 | ❌ (需要瀏覽器) | ✅ |
| 固定桌面 | ❌ | ✅ (始終置頂) |
| 無邊框 | ❌ | ✅ |
| 任務欄圖示 | ❌ | ✅ |
| 記憶位置 | ❌ | ✅ |
| 系統整合 | ❌ | ✅ |
| 檔案大小 | 小 (~50KB) | 大 (~150MB) |
| 安裝需求 | 無 | 需要 (或便攜版) |

## 🐛 故障排除

**問題：應用無法啟動**
- 確保已安裝 Node.js
- 執行 `npm install` 安裝依賴
- 檢查是否有其他應用佔用端口

**問題：無法載入資料**
- 檢查網路連接
- 確認 API 可訪問
- 查看開發者工具中的錯誤訊息

**問題：視窗位置異常**
- 刪除用戶資料目錄中的配置文件
- 重新啟動應用

## 📄 授權

此專案遵循原始儲存庫的授權條款。

## 🙏 鳴謝

- MTR API 由香港政府提供
- 基於 Electron 框架構建
- UI 設計靈感來自現代桌面小組件

---

**這是一個真正可以固定在桌面的小組件！** 🎉
